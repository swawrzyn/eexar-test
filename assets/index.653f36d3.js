import{d as w,t as _,r as h,w as b,c as u,a as x,n as j,o as l,b as B,$ as g,s as T,F as $,e as k,f as v,g as A,h as d,i as C,j as G}from"./vendor.e7a5fbef.js";const R=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};R();var y=(r,t)=>{const n=r.__vccOpts||r;for(const[e,o]of t)n[e]=o;return n};const F=w({props:{coordinates:{required:!0,type:Array},num:{required:!0,type:Number}},emits:["tile-click"],setup(r){const{num:t}=_(r),n=h("");return b(t,(e,o)=>{e>o?(n.value="yellow",setTimeout(()=>{n.value=""},500)):o!=0&&e==0&&(n.value="green",setTimeout(()=>{n.value=""},1500))}),{pulse:n}}});function L(r,t,n,e,o,a){return l(),u("td",{class:j(["w-8 h-6 align-middle text-center text-xs cursor-pointer select-none shadow-sm hover:shadow-md hover:bg-yellow-100 active:bg-yellow-300 border transition-all border-gray-100",{"bg-yellow-200":r.pulse==="yellow","bg-green-200":r.pulse==="green"}]),onClick:t[0]||(t[0]=s=>r.$emit("tile-click",r.coordinates))},x(r.num>0?r.num:""),3)}var N=y(F,[["render",L]]);function S(){return new SharedWorker("/eexar-test/assets/game-worker.a40872b4.js",{type:"classic"})}var p=()=>B(new S().port);const O=async(r,t)=>await p().njSumRowsCols(r,t),q=async r=>{const t=g.array(r),n=t.shape[0];for(let e=0;e<n;e++){const o=t.slice([e,e+1]).flatten().tolist(),s=await p().checkFibonacciRow(o,5);if(s.length)for(const c of s)t.set(e,c,0)}for(let e=0;e<n;e++){const o=t.slice([e,e+1]).flatten().slice([null,null,-1]).tolist(),s=await p().checkFibonacciRow(o,5);if(s.length){console.log("row clear!",s);for(const c of s)t.set(e,n-1-c,0)}}for(let e=0;e<n;e++){const o=t.slice(0,[e,e+1]).flatten().tolist(),s=await p().checkFibonacciRow(o,5);if(s.length)for(const c of s)t.set(c,e,0)}for(let e=0;e<n;e++){const o=t.slice(0,[e,e+1]).flatten().slice([null,null,-1]).tolist(),s=await p().checkFibonacciRow(o,5);if(s.length)for(const c of s)t.set(n-1-c,e,0)}return t.tolist()},E=async(r,t)=>{let n=await O([...r],t);return n=await q(n),n},z=(r=0,t,n)=>{const e=g.zeros([t,n]);return r>0&&e.add(r,!1),e.tolist()},I=w({components:{GameTile:N},props:{restart:{default:!1,type:Boolean}},emits:["update:restart"],setup(r,{emit:t}){let n=T(z(0,50,50));const e=h(0),{restart:o}=_(r);return b(o,(s,c)=>{if(s){for(const[i,f]of n.entries())n[i]=f.map(m=>0);t("update:restart",!1)}}),{board:n,tileClick:async s=>{const c=await E(n,s);for(const[i,f]of c.entries())n[i]=f},updateKey:e}}});function K(r,t,n,e,o,a){const s=v("GameTile");return l(),u("div",{key:r.updateKey,class:"bg-white shadow-lg"},[(l(!0),u($,null,k(r.board,(c,i)=>(l(),u("tr",{key:`row-${i+1}`},[(l(!0),u($,null,k(c,(f,m)=>(l(),A(s,{key:`cell-${i+1}:${m+1}`,coordinates:[i,m],num:f,onTileClick:te=>r.tileClick([i,m])},null,8,["coordinates","num","onTileClick"]))),128))]))),128))])}var W=y(I,[["render",K]]);const P=w({setup(){return{restart:h(!1)}},components:{GameBoard:W}}),D={class:"w-full flex flex-col items-center justify-center"},M={class:"w-full flex items-center justify-center"},U=d("div",{class:"w-1/2 flex flex-col items-start justify-start"},[d("div",{class:"text-3xl font-bold"},"EEXAR Technical Test"),d("span",null,"By: Stefan Wawrzyn")],-1),V={class:"w-1/2 flex items-center justify-end"},X=["disabled"];function H(r,t,n,e,o,a){const s=v("GameBoard");return l(),u("div",D,[d("div",M,[U,d("div",V,[d("button",{type:"button",class:"bg-blue-500 hover:bg-blue-700 active:bg-blue-900 text-white px-4 py-2 rounded font-bold transition-colors shadow hover:shadow-md active:shadow-lg",onClick:t[0]||(t[0]=c=>r.restart=!0),disabled:r.restart}," Restart ",8,X)])]),C(s,{restart:r.restart,"onUpdate:restart":t[1]||(t[1]=c=>r.restart=c)},null,8,["restart"])])}var J=y(P,[["render",H]]);const Q=w({components:{Game:J},setup(){}}),Y={class:"h-screen container mx-auto flex items-center justify-center"};function Z(r,t,n,e,o,a){const s=v("Game");return l(),u("div",Y,[C(s)])}var ee=y(Q,[["render",Z]]);G(ee).mount("#app");
